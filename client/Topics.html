<!-- list of topics -->
<template name="topics">
	<div class="topics">
		{{#each topics}}
			{{> topicItem}}
		{{/each}}
<!--
		{{#if loadMorePath}}
			<a class="load-more" href="{{loadMorePath}}">Load more</a>
		{{else}}
			{{#unless ready}}
				{{> spinner}}
			{{/unless}}
		{{/if}}
-->
	</div>
</template>

<!-- single topic in a list view -->
<template name="topicItem">
	<div class="topic col-lg-3 col-md-4 col-sm-6 col-xs-12">
		<div class="topic-content">
			<h3><a href="{{pathFor 'topicPage'}}">{{title}}</a></h3>
			<p>"{{trimString description 100}}"</p>
				<div class="reference-url">
					{{ #if reference_url }}
						Reference:
						<a href="{{ reference_url }}">{{ reference_url }}</a>
					{{/if}}
				</div>
			<div class='details'>
				{{pluralize voteCount "vote" "votes"}},
				submitted by {{author}},
				<a href="{{pathFor 'topicPage'}}">{{pluralize commentCount "comment" "comments"}}</a>
			</div>
		</div>
		{{#if isLoggedIn}}
			<div class="actions btn-group">
				{{#if hasAlreadyVoted}}
					<a href="#" class="voteBtn alreadyVoted btn btn-default disabled">
						<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>
					</a>
				{{else}}
					<a href="#" class="voteBtn upvote btn btn-default">
						Vote Up
						<span class="glyphicon glyphicon-upload" aria-hidden="true"></span>
					</a>
				{{/if}}
				<a href="{{pathFor 'topicPage'}}" class="discuss btn btn-default">	  Discuss
					<span class="glyphicon glyphicon-comment" aria-hidden="true"></span>
				</a>
				{{#if isOwnTopicOrAdmin}}
					<a href="{{pathFor 'editTopic'}}" class="edit btn btn-default">
						Edit
						<span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
					</a>
				{{/if}}
				{{#if isAdmin}}
					<a href="{{pathFor 'mergeTopic'}}" class="merge btn btn-default">
						Merge
						<span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
					</a>
				{{/if}}
			</div>
		{{/if}}
	</div>
</template>


<!-- page showing a single topic -->
<template name="topicPage">
	{{> singleTopic}}
	<div class="comments-container">
		<h4>
			Comments
			<span class="glyphicon glyphicon-comment" aria-hidden="true"></span>
		</h4>
		<ul class="comments">
			{{#each comments}}
				{{> commentItem}}
			{{/each}}
		</ul>
		{{> embedCommentForm}}
	</div>
</template>


<!-- single topic in a list view -->
<template name="singleTopic">
	<div class="topic singleTopic">
		<div class="topic-content">
			<h3><a href="{{pathFor 'topicPage'}}">{{title}}</a></h3>
			<p>"{{trimString description}}"</p>
				<div class="reference-url">
					{{ #if reference_url }}
						Reference:
						<a href="{{ reference_url }}">{{ reference_url }}</a>
					{{/if}}
				</div>
			<div class='details'>
				{{pluralize voteCount "vote" "votes"}},
				submitted by {{author}},
				<a href="{{pathFor 'topicPage'}}">{{pluralize commentCount "comment" "comments"}}</a>
			</div>
		</div>
		{{#if isLoggedIn}}
			<div class="actions btn-group">
				{{#if hasAlreadyVoted}}
					<a href="#" class="voteBtn alreadyVoted btn btn-default disabled">
						<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>
					</a>
				{{else}}
					<a href="#" class="voteBtn upvote btn btn-default">
						Vote Up
						<span class="glyphicon glyphicon-upload" aria-hidden="true"></span>
					</a>
				{{/if}}
				{{#if isOwnTopicOrAdmin}}
					<a href="{{pathFor 'editTopic'}}" class="edit btn btn-default">
						Edit
						<span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
					</a>
				{{/if}}
				{{#if isAdmin}}
					<a href="{{pathFor 'mergeTopic'}}" class="merge btn btn-default">
						Merge
						<span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
					</a>
				{{/if}}
			</div>
		{{/if}}
	</div>
</template>



<!-- create a new topic -->
<template name="createTopic">
	<form class="main form">
		<div class="form-group {{errorClass 'title'}}">
			<label class="control-label" for="title">Title</label>
			<div class="controls">
				<input name="title" id="title" type="text" value="" placeholder="Name your topic" class="form-control"/>
				<span class='help-block'>{{errorMessage 'title'}}</span>
			</div>
		</div>
		<div class="form-group {{errorClass 'description'}}">
			<label class="control-label" for="description">Description</label>
			<div class="controls">
				<textarea name="description" id="description" value="" placeholder="Description of your topic" class="form-control"></textarea>
				<span class='help-block'>{{errorMessage 'description'}}</span>
			</div>
		</div>
		<input type="submit" value="Create" class="btn btn-primary"/>
		<input type="submit" value="Cancel" class="btn cancel"/>
	</form>
</template>

<!-- edit existing topic -->
<template name="editTopic">
	<form class="main form">
		<div class="form-group {{errorClass 'title'}}">
			<label class="control-label" for="title">Title</label>
			<div class="controls">
				<input name="title" id="title" type="text" value="{{title}}" placeholder="Name your topic" class="form-control"/>
				<span class='help-block'>{{errorMessage 'title'}}</span>
			</div>
		</div>
		<div class="form-group {{errorClass 'description'}}">
			<label class="control-label" for="description">Description</label>
			<div class="controls">
				<input name="description" id="description" type="text" value="{{description}}" placeholder="Description of your topic" class="form-control"/>
				<span class='help-block'>{{errorMessage 'description'}}</span>
			</div>
		</div>
		<div class="form-group {{errorClass 'title'}}">
			<label class="control-label" for="title">Reference URL:</label>
			<div class="controls">
				<input name="reference_url" id="reference_url" type="text" value="{{reference_url}}" placeholder="Provide a reference URL (optional)" class="form-control"/>
				<span class='help-block'>{{errorMessage 'reference_url'}}</span>
			</div>
		</div>
		<input type="submit" value="Save" class="btn btn-primary submit"/>
		<input type="submit" value="Cancel" class="btn cancel"/>
		<a class="btn btn-link delete" href="#">Delete topic</a>
	</form>
</template>


<!-- merge existing topic -->
<template name="mergeTopic">
	<form class="main form">
		<div class="form-group {{errorClass 'title'}}">
			<label class="control-label" for="title">Parent Topic</label>
			{{title}}
		</div>
		<div class="form-group {{errorClass 'description'}}">
			<label class="control-label" for="description">Child Topic ID</label>
			<div class="controls">
				<input name="child_topic_id" id="child_topic_id" type="text" value="{{child_topic_id}}" placeholder="ID of the child topic" class="form-control"/>
				<span class='help-block'>{{errorMessage 'child_topic_id'}}</span>
			</div>
		</div>
		<input type="submit" value="Save" class="btn btn-primary submit"/>
		<input type="submit" value="Cancel" class="btn cancel"/>
	</form>
</template>

